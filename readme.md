# DDoS Avg API

## Описание

API для обработки CSV-файлов с данными о DDoS-атаках. Рассчитывает среднее время соединения (`avgDur`) для каждого источника (`saddr`) и возвращает результаты в формате JSON. Результаты сохраняются в базе данных SQLite.

---

## Установка и запуск

### Локальный запуск
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш-профиль/ddos_avg_api.git
   ```
   ```bash
   cd ddos_avg_api
   ```
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
Запустите сервер:
   ```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

API будет доступно по адресу: http://127.0.0.1:8000

### Запуск с Docker
Сборка Docker-образа:
   ```bash
   docker build -t ddos_avg_api .
   ```

Запуск контейнера:
   ```bash
   docker run -d -p 8000:8000 ddos_avg_api
   ```

API будет доступно по адресу: http://127.0.0.1:8000

### API Эндпоинты
`/upload/ (POST)`
Описание: Загружает CSV-файл, обрабатывает данные и сохраняет результаты.

Пример запроса:

   ```bash
   curl -X POST "http://127.0.0.1:8000/upload/" -F "file=@your_file.csv"
   ```
Пример ответа:
   ```json
[
    {
        "saddr": "192.168.100.111",
        "avgDur": 5.111111
    },
    {
        "saddr": "192.168.100.121",
        "avgDur": 1.0000555
    }
]
   ```
`/results/ (GET)`
Описание: Возвращает текущие результаты вычислений из базы данных.

Пример запроса:

   ```bash
   curl -X GET "http://127.0.0.1:8000/results/"
   ```
Пример ответа:

   ```json
[
    {
        "saddr": "192.168.100.111",
        "avgDur": 5.111111
    },
    {
        "saddr": "192.168.100.121",
        "avgDur": 1.0000555
    }
]
   ```
